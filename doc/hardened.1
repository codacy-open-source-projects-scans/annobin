.\" -*- mode: troff; coding: utf-8 -*-
.\" Automatically generated by Pod::Man 5.01 (Pod::Simple 3.43)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" \*(C` and \*(C' are quotes in nroff, nothing in troff, for use with C<>.
.ie n \{\
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\" ========================================================================
.\"
.IX Title "HARDENED 1"
.TH HARDENED 1 2024-01-02 annobin-1 "RPM Development Tools"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH NAME
hardened \- Hardening Checks
.SH SYNOPSIS
.IX Header "SYNOPSIS"
hardened
  [\fB\-\-help\fR]
  [\fB\-\-version\fR]
  [\fB\-\-verbose\fR]
  [\fB\-\-quiet\fR]
  [\fB\-\-ignore\-unknown\fR]
  [\fB\-\-silent\fR]
  [\fB\-\-vulnerable\fR]
  [\fB\-\-not\-hardened\fR]
  [\fB\-\-all\fR]
  [\fB\-\-file\-type=\fR\fIauto|lib|exec|obj\fR]
  [\fB\-\-skip=\fR\fIopt|stack|fort|now|relro|pic|operator|clash|cf|cet|realign\fR]
  [\fB\-\-readelf=\fR\fIpath\fR]
  [\fB\-\-tmpdir=\fR\fIdir\fR]
  [\fB\-\-\fR]
  \fIfile\fR...
.SH DESCRIPTION
.IX Header "DESCRIPTION"
The \fIhardened\fR script reports on the hardening status of the
specified file(s).  In particular it checks that the whole file was
compiled with \fB\-O2\fR or higher and the
\&\fB\-fstack\-protector\-strong\fR, \fB\-D_FORTIFY_SOURCE=2\fR,
\&\fB\-Wl,\-z,now\fR, \fB\-Wl,\-z,relro\fR, \fB\-fPIE\fR, 
\&\fB\-Wp,\-D_GLIBCXX_ASSERTIONS\fR, \fB\-fstack\-clash\-protection\fR
\&\fB\-fcf\-protection=full\fR and \fB\-mcet\fR
options.
.PP
The script accepts the following command line options:
.IP \fB\-\-help\fR 4
.IX Item "--help"
.PD 0
.IP \fB\-h\fR 4
.IX Item "-h"
.PD
Displays the usage of the script and then exits.
.IP \fB\-\-version\fR 4
.IX Item "--version"
.PD 0
.IP \fB\-v\fR 4
.IX Item "-v"
.PD
Displays the version of the script.
.IP \fB\-\-verbose\fR 4
.IX Item "--verbose"
.PD 0
.IP \fB\-V\fR 4
.IX Item "-V"
.PD
Enables verbose mode, causing the script to detail each action it
takes.
.IP \fB\-\-quiet\fR 4
.IX Item "--quiet"
.PD 0
.IP \fB\-q\fR 4
.IX Item "-q"
.PD
Do not include the name of script in the out generated by the script.
.IP \fB\-\-ignore\-unknown\fR 4
.IX Item "--ignore-unknown"
.PD 0
.IP \fB\-i\fR 4
.IX Item "-i"
.PD
Do not report file types that are not supported or recognised.
.IP \fB\-\-tmpdir=\fR\f(BIdir\fR 4
.IX Item "--tmpdir=dir"
.PD 0
.IP "\fB\-t \fR\f(BIdir\fR" 4
.IX Item "-t dir"
.PD
Directory to use to store temporary files.
.IP \fB\-\-silent\fR 4
.IX Item "--silent"
.PD 0
.IP \fB\-s\fR 4
.IX Item "-s"
.PD
Produce no output.  Just return an exit status.
.IP \fB\-\-vulnerable\fR 4
.IX Item "--vulnerable"
.PD 0
.IP \fB\-u\fR 4
.IX Item "-u"
.PD
Only report files that are known to be vulnerable.  Ie files that
record all of the necessary information about how they were built,
but which were built with an incorrect set of options.
.Sp
This option is the default behaviour of the script.
.IP \fB\-\-not\-hardened\fR 4
.IX Item "--not-hardened"
.PD 0
.IP \fB\-n\fR 4
.IX Item "-n"
.PD
Report any file that cannot be proven to be hardened.  This is like
the \fB\-\-vulnerable\fR option, except that it will also report
files that do not record all of the necessary information.
.IP \fB\-\-all\fR 4
.IX Item "--all"
.PD 0
.IP \fB\-a\fR 4
.IX Item "-a"
.PD
Report the hardening status of all of the files examined.
.IP \fB\-\-file\-type=\fR\fIauto|lib|exec|obj\fR 4
.IX Item "--file-type=auto|lib|exec|obj"
.PD 0
.IP \fB\-f=\fR\fIauto|lib|exec|obj\fR 4
.IX Item "-f=auto|lib|exec|obj"
.PD
Specifies the type of file being examined.  Possible values are:
.RS 4
.IP \fBauto\fR 4
.IX Item "auto"
Automatically determine the file type from its extension.
This is the default.
.IP \fBlib\fR 4
.IX Item "lib"
Assume all files are shared libraries.  Checks that the \fB\-fPIC\fR
option was used.
.IP \fBexec\fR 4
.IX Item "exec"
Assume all files are executables.  Checks that the \fB\-fPIE\fR
option was used.
.IP \fBobj\fR 4
.IX Item "obj"
Assume all files are object files.  Skips checks of the bind now status.
.RE
.RS 4
.RE
.IP \fB\-\-skip=\fR\fIopt|stack|fort|now|relro|pic|operator|clash|cf|cet\fR 4
.IX Item "--skip=opt|stack|fort|now|relro|pic|operator|clash|cf|cet"
.PD 0
.IP \fB\-k=\fR\fIopt|stack|fort|now|relro|pic|operator|clash|cf|cet\fR 4
.IX Item "-k=opt|stack|fort|now|relro|pic|operator|clash|cf|cet"
.PD
Disables checks of various different hardening features.    This
option can be repeated multiple times, and the values accumulate.
Possible values are:
.RS 4
.IP \fBopt\fR 4
.IX Item "opt"
Disables checks of the optimization level used.
.IP \fBstack\fR 4
.IX Item "stack"
Disables checks of the stack protection level.
.IP \fBfort\fR 4
.IX Item "fort"
Disables checks for \fB\-D_FORTIFY_SOURCE\fR.
.IP \fBnow\fR 4
.IX Item "now"
Disables checks for \fBBIND NOW\fR status.
.IP \fBrelro\fR 4
.IX Item "relro"
Disables checks for \fBrelro\fR or read-only-relocs.
.IP \fBpic\fR 4
.IX Item "pic"
Disables checks for \fB\-fPIC\fR/\fB\-fPIE\fR.
.IP \fBoperator\fR 4
.IX Item "operator"
Disables checks for \fB\-D_GLIBCXX_ASSERTIONS\fR.
.IP \fBclash\fR 4
.IX Item "clash"
Disables checks for stack clash protection.
.IP \fBcf\fR 4
.IX Item "cf"
Disables checks for control flow protection.
Note \- these checks are only run on x86_64 binaries.
.IP \fBcet\fR 4
.IX Item "cet"
Disables checks for control flow enforcement.
Note \- these checks are only run on x86_64 binaries.
.IP \fBrealign\fR 4
.IX Item "realign"
Disable checks for stack realignment.
Note \- these checks are only run on i686 binaries.
.RE
.RS 4
.RE
.IP \fB\-\-readelf=\fR\f(BIpath\fR 4
.IX Item "--readelf=path"
.PD 0
.IP \fB\-r=\fR\f(BIpath\fR 4
.IX Item "-r=path"
.PD
Use the specified program to read the notes from the files.
.IP \fB\-\-\fR 4
.IX Item "--"
Stop accumulating command line options.  This allows the script to be
run on files whose names starts with a dash.
.SH OPTIONS
.IX Header "OPTIONS"
.SH COPYRIGHT
.IX Header "COPYRIGHT"
Copyright (c) 2018 \- 2024 Red Hat.
.PP
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with no Invariant Sections, with no Front-Cover Texts, and with no
Back-Cover Texts.  A copy of the license is included in the
section entitled "GNU Free Documentation License".
