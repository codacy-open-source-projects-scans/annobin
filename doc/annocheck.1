.\" -*- mode: troff; coding: utf-8 -*-
.\" Automatically generated by Pod::Man 5.01 (Pod::Simple 3.43)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" \*(C` and \*(C' are quotes in nroff, nothing in troff, for use with C<>.
.ie n \{\
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds C`
.    ds C'
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is >0, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.\"
.\" Avoid warning from groff about undefined register 'F'.
.de IX
..
.nr rF 0
.if \n(.g .if rF .nr rF 1
.if (\n(rF:(\n(.g==0)) \{\
.    if \nF \{\
.        de IX
.        tm Index:\\$1\t\\n%\t"\\$2"
..
.        if !\nF==2 \{\
.            nr % 0
.            nr F 2
.        \}
.    \}
.\}
.rr rF
.\" ========================================================================
.\"
.IX Title "ANNOCHECK 1"
.TH ANNOCHECK 1 2024-01-02 annobin-1 "RPM Development Tools"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH NAME
annocheck \- Analysing binary files.
.SH SYNOPSIS
.IX Header "SYNOPSIS"
annocheck
  [\fB\-h | \-\-help\fR]
  [\fB\-\-help\-\fR\fItool\fR]
  [\fB\-\-version\fR]
  [\fB\-v | \-\-verbose\fR]
  [\fB\-q | \-\-quiet\fR]
  [\fB\-i | \-\-ignore\-unknown\fR]
  [\fB\-r | \-\-report\-unknown\fR]
  [\fB\-f | \-\-follow\-links\fR]
  [\fB\-I | \-\-ignore\-links\fR]
  [\fB\-\-debug\-rpm=\fR\fIfile\fR]
  [\fB\-\-dwarf\-dir=\fR\fIdir\fR]
  [\fB\-p\fR \fItext\fR \fB| \-\-prefix=\fR\fItext\fR]
  [\fB\-t\fR \fIdir\fR \fB| \-\-tmpdir=\fR\fIdir\fR]
  [\fB\-u | \-\-use\-debuginfod\fR]
  [\fB\-n | \-\-no\-use\-debuginfod\fR]
  [\fB\-\-enable\-\fR\fItool\fR]
  [\fB\-\-disable\-\fR\fItool\fR]
  [\fB\-\-\fR\fItool\fR\fB\-\fR\fIoption\fR]
  \fIfile\fR...
.PP
annocheck
  \fB\-\-enable\-builtby\fR
  [\fB\-\-all\fR]
  [\fB\-\-tool=\fR\fIname\fR]
  [\fB\-\-nottool=\fR\fIname\fR]
  \fIfile\fR...
.SH DESCRIPTION
.IX Header "DESCRIPTION"
The \fBannocheck\fR program can analyse binary files and report
information about them.  It is designed to be modular, with a set of
self-contained tools providing the checking functionality.
Currently the following tools are implemented:
.PP
The \fBannocheck\fR program is able to scan inside rpm files and
libraries.  It will automatically recurse into any directories that
are specified on the command line.  In addition \fBannocheck\fR
knows how to find debug information held in separate debug files, and
it will search for these whenever it needs the resources that they
contain.
.PP
New tools can be added to the annocheck framework by creating a new
source file and including it in the \fIMakefile\fR used to build
\&\fBannocheck\fR.  The modular nature of \fBannocheck\fR means
that nothing else needs to be updated.
.PP
New tools must fill out a \f(CW\*(C`struct checker\*(C'\fR structure (defined in
\&\fIannocheck.h\fR) and they must define a constructor function that
calls \f(CW\*(C`annocheck_add_checker\*(C'\fR to register their presence at
program start-up.
.PP
The \fBannocheck\fR program supports some generic command line
options that are used regardless of which tools are enabled.
.ie n .IP """\-\-debug\-rpm=\fIfile\fR""" 4
.el .IP \f(CW\-\-debug\-rpm=\fR\f(CIfile\fR\f(CW\fR 4
.IX Item "--debug-rpm=file"
Look in \fIfile\fR for separate dwarf debug information.
.ie n .IP """\-\-dwarf\-dir=\fIdir\fR""" 4
.el .IP \f(CW\-\-dwarf\-dir=\fR\f(CIdir\fR\f(CW\fR 4
.IX Item "--dwarf-dir=dir"
Look in \fIdir\fR for separate dwarf debug information files.
.ie n .IP """\-\-help""" 4
.el .IP \f(CW\-\-help\fR 4
.IX Item "--help"
.PD 0
.ie n .IP """\-h""" 4
.el .IP \f(CW\-h\fR 4
.IX Item "-h"
.PD
Displays the generic annobin usage information and then exits.
.ie n .IP """\-\-help\-\fItool\fR""" 4
.el .IP \f(CW\-\-help\-\fR\f(CItool\fR\f(CW\fR 4
.IX Item "--help-tool"
Display the usage information for \fItool\fR and then exits.
.ie n .IP """\-\-report\-unknown""" 4
.el .IP \f(CW\-\-report\-unknown\fR 4
.IX Item "--report-unknown"
.PD 0
.ie n .IP """\-\-ignore\-unknown""" 4
.el .IP \f(CW\-\-ignore\-unknown\fR 4
.IX Item "--ignore-unknown"
.ie n .IP """\-r""" 4
.el .IP \f(CW\-r\fR 4
.IX Item "-r"
.ie n .IP """\-i""" 4
.el .IP \f(CW\-i\fR 4
.IX Item "-i"
.PD
If enabled, unknown file types are reported when they are encountered.
This includes non-ELF format files, block devices and so on.
Directories are not considered to be unknown and are automatically
descended.
.Sp
The default setting depends upon the file being processed.  For rpm
files the default is to ignore unknowns, since these often contain
non-executable files.  For other file types, including directories,
the default is to report unknown files.
.ie n .IP """\-\-ignore\-links""" 4
.el .IP \f(CW\-\-ignore\-links\fR 4
.IX Item "--ignore-links"
.PD 0
.ie n .IP """\-\-follow\-links""" 4
.el .IP \f(CW\-\-follow\-links\fR 4
.IX Item "--follow-links"
.ie n .IP """\-I""" 4
.el .IP \f(CW\-I\fR 4
.IX Item "-I"
.ie n .IP """\-f""" 4
.el .IP \f(CW\-f\fR 4
.IX Item "-f"
.PD
Specifies whether symbolic links should be followed or ignored.
.Sp
The default setting depends upon the file being processed.  For rpm
files the default is to ignore symbolic links, since these often
unresolveable.  For other file types, including directories,
the default is to follow the links.
.ie n .IP """\-\-prefix=\fItext\fR""" 4
.el .IP \f(CW\-\-prefix=\fR\f(CItext\fR\f(CW\fR 4
.IX Item "--prefix=text"
.PD 0
.ie n .IP """\-p \fItext\fR""" 4
.el .IP "\f(CW\-p \fR\f(CItext\fR\f(CW\fR" 4
.IX Item "-p text"
.PD
Include \fItext\fR in the output description.
.ie n .IP """\-\-quiet""" 4
.el .IP \f(CW\-\-quiet\fR 4
.IX Item "--quiet"
.PD 0
.ie n .IP """\-q""" 4
.el .IP \f(CW\-q\fR 4
.IX Item "-q"
.PD
Do not print anything, just return an exit status.
.ie n .IP """\-\-tmpdir=\fIdir\fR""" 4
.el .IP \f(CW\-\-tmpdir=\fR\f(CIdir\fR\f(CW\fR 4
.IX Item "--tmpdir=dir"
.PD 0
.ie n .IP """\-t \fIdir\fR""" 4
.el .IP "\f(CW\-t \fR\f(CIdir\fR\f(CW\fR" 4
.IX Item "-t dir"
.PD
Use \fIdir\fR as a directory for holding temporary files.
.ie n .IP """\-\-verbose""" 4
.el .IP \f(CW\-\-verbose\fR 4
.IX Item "--verbose"
.PD 0
.ie n .IP """\-v""" 4
.el .IP \f(CW\-v\fR 4
.IX Item "-v"
.PD
Produce informational messages whilst working.  Repeat for more
information.
.ie n .IP """\-\-version""" 4
.el .IP \f(CW\-\-version\fR 4
.IX Item "--version"
Report the version of the tool and then exit.
.ie n .IP """\-\-use\-debuginfod""" 4
.el .IP \f(CW\-\-use\-debuginfod\fR 4
.IX Item "--use-debuginfod"
.PD 0
.ie n .IP """\-u""" 4
.el .IP \f(CW\-u\fR 4
.IX Item "-u"
.PD
Enable the use of the debuginfod service to download debuginfo rpms.
This feature is enabled by default, but it is only active if support
for the debuginfod server has been compiled in to annocheck.
.ie n .IP """\-\-no\-use\-debuginfod""" 4
.el .IP \f(CW\-\-no\-use\-debuginfod\fR 4
.IX Item "--no-use-debuginfod"
.PD 0
.ie n .IP """\-n""" 4
.el .IP \f(CW\-n\fR 4
.IX Item "-n"
.PD
Do not use the debuginfod service, even if it is available.
.ie n .IP """\-\-enable\-\fItool\fR""" 4
.el .IP \f(CW\-\-enable\-\fR\f(CItool\fR\f(CW\fR 4
.IX Item "--enable-tool"
Enable \fItool\fR.  Most tools are disabled by default and so need to
be enabled via this option before they will act.
.ie n .IP """\-\-disable\-\fItool\fR""" 4
.el .IP \f(CW\-\-disable\-\fR\f(CItool\fR\f(CW\fR 4
.IX Item "--disable-tool"
Disable \fItool\fR.  Normally used to disable the hardening checker,
which is enabled by default.
.ie n .IP """\-\-\fItool\fR\-\fIoption\fR""" 4
.el .IP \f(CW\-\-\fR\f(CItool\fR\f(CW\-\fR\f(CIoption\fR\f(CW\fR 4
.IX Item "--tool-option"
Pass \fIoption\fR on to \fItool\fR.
.PP
Any other command line options will be passed to the tools in turn in
order to give them a chance to claim and process them.
.PP
The \fIbuilt-by\fR tool is disabled by default, but it can be enabled
by the command line option \fB\-\-enable\-builtby\fR.  The tool
checks the specified files to see if any information is stored about
how the file was built.
.PP
Since the hardening checker is enabled by default it may also be
useful to add the \fB\-\-disable\-hardened\fR option to the command
line.
.PP
The tool supports a few command line options to customise its
behaviour:
.ie n .IP """\-\-all""" 4
.el .IP \f(CW\-\-all\fR 4
.IX Item "--all"
Report all builder identification strings.  The tool has several
different heuristics for determining the builder.  By default it will
report the information return by the first successful heuristic.  If
the \fB\-\-all\fR option is enabled then all successful results will
be returned.
.ie n .IP """\-\-tool=\fIname\fR""" 4
.el .IP \f(CW\-\-tool=\fR\f(CIname\fR\f(CW\fR 4
.IX Item "--tool=name"
This option can be used to restrict the output to only those files
which were built by a specific tool.  This can be useful when scanning
a directory full of files searching for those built by a particular
compiler.
.ie n .IP """\-\-nottool=\fINAME\fR""" 4
.el .IP \f(CW\-\-nottool=\fR\f(CINAME\fR\f(CW\fR 4
.IX Item "--nottool=NAME"
This option can be used to restrict the output to only those files
which were not built by a specific tool.  This can be useful when
scanning a directory full of files searching for those that were not
built by a particular compiler.
.SH OPTIONS
.IX Header "OPTIONS"
.SH COPYRIGHT
.IX Header "COPYRIGHT"
Copyright (c) 2018 \- 2024 Red Hat.
.PP
Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3
or any later version published by the Free Software Foundation;
with no Invariant Sections, with no Front-Cover Texts, and with no
Back-Cover Texts.  A copy of the license is included in the
section entitled "GNU Free Documentation License".
